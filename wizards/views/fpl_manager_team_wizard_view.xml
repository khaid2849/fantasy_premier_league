<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="fpl_manager_team_wizard_form" model="ir.ui.view">
        <field name="name">fpl.manager.team.wizard.form</field>
        <field name="model">fpl.manager.team.wizard</field>
        <field name="arch" type="xml">
            <form string="FPL Manager Team Wizard">
                <sheet>
                    <group>
                        <field name="manager_id" required="1" readonly="context.get('is_readonly')"/>
                        <field name="cookies" required="1"/>
                        <field name="x_api_authorization" required="1" password="True"/>
                    </group>

                    <group/>
                    <group>
                        <p class="text-muted"><strong>How to get your Manager ID ?</strong><br/>
                            <em>Note: Manager ID will be automatically extracted from the API if not provided.</em><br/>
                            1. Log in to <a href="https://fantasy.premierleague.com/" target="_blank">https://fantasy.premierleague.com/</a><br/>
                            2. Access your team: Navigate to either the "Pick Team" or "Points" section.<br/>
                            3. Check the URL: Look at the address bar of your browser.<br/>
                            You'll see a URL similar to this: https://fantasy.premierleague.com/entry/1234567/event/1.<br/>
                            The number after /entry/ and before /event/ (in this case, 1234567) is your FPL ID, according to several FPL resources.<br/><br/>

                            <strong>How to get your Cookies and X-api-authorization ?</strong><br/>
                            1. Open the developer tools (Ctrl+Shift+I or F12)<br/>
                            2. Go to the Network tab<br/>
                            3. Find the request to https://fantasy.premierleague.com/api/me/<br/>
                            4. Copy the Cookies and X-api-authorization value from the request headers
                        </p>
                    </group>
                </sheet>
                <footer>
                    <button name="action_verify_manager_team" type="object" class="btn-primary"
                            string="Verify Your Team"/>
                    <button string="Cancel" type="object" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <record id="fpl_manager_team_wizard_action" model="ir.actions.act_window">
        <field name="name">FPL Manager Team Wizard</field>
        <field name="res_model">fpl.manager.team.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>
</odoo>
