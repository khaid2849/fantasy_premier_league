<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="fpl_teams_view_tree" model="ir.ui.view">
        <field name="name">fpl.teams.tree</field>
        <field name="model">fpl.teams</field>
        <field name="arch" type="xml">
            <list create="0" edit="0" delete="0" default_order="name asc" string="Teams">
                <field name="photo" widget="image" options="{'size': [40, 40]}"/>
                <field name="name"/>
                <field name="short_name" optional="show"/>
                <field name="code" optional="show"/>
                <field name="form" optional="hide"/>
                <field name="win" optional="show"/>
                <field name="loss" optional="show"/>
                <field name="draw" optional="show"/>
                <field name="points" optional="show"/>
                <field name="strength" optional="hide"/>
                <field name="played" optional="hide"/>
                <field name="position" optional="hide"/>
                <field name="strength_overall_home" optional="hide"/>
                <field name="strength_overall_away" optional="hide"/>
                <field name="strength_attack_home" optional="hide"/>
                <field name="strength_attack_away" optional="hide"/>
                <field name="strength_defence_home" optional="hide"/>
                <field name="strength_defence_away" optional="hide"/>
            </list>
        </field>
    </record>

    <record id="fpl_teams_view_form" model="ir.ui.view">
        <field name="name">fpl.teams.form</field>
        <field name="model">fpl.teams</field>
        <field name="arch" type="xml">
            <form string="Team" create="0" edit="0" delete="0">
                <sheet>
                    <field name="photo" widget="image" class="oe_avatar"
                           options="{&quot;preview_image&quot;: &quot;photo&quot;}"/>
                    <div class="oe_title mb24">
                        <h1>
                            <field widget="text" class="text-break" name="name" default_focus="1"/>
                        </h1>
                        <div class="o_row">
                            <field name="short_name"/>
                        </div>
                    </div>
                    <group string="Team League Info">
                        <group>
                            <field name="win"/>
                            <field name="loss"/>
                            <field name="draw"/>
                            <field name="points"/>
                        </group>
                        <group>
                            <field name="played"/>
                            <field name="position"/>
                            <field name="strength"/>
                        </group>
                    </group>

                    <notebook>
                        <page string="Strength Overall Info">
                            <group string="Strength Overall Info">
                                <field name="strength_overall_home"/>
                                <field name="strength_overall_away"/>
                            </group>
                        </page>

                        <page string="Strength Attack Info">
                            <group string="Strength Attack Info">
                                <field name="strength_attack_home"/>
                                <field name="strength_attack_away"/>
                            </group>
                        </page>

                        <page string="Strength Defence Info">
                            <group string="Strength Defence Info">
                                <field name="strength_defence_home"/>
                                <field name="strength_defence_away"/>
                            </group>
                        </page>
                    </notebook>
                    

                   <notebook>
                        <page string="Players">
                            <field name="element_ids" widget="one2many" options="{'no_create': True, 'no_create_edit': True}">
                                <list create="0" edit="0" delete="0">
                                    <field name="photo" widget="image" options="{'size': [40, 40]}" string=""/>
                                    <field name="element_type_id" optional="show" string="Position"/>
                                    <field name="web_name" string="Name"/>
                                    <field name="first_name" optional="hide"/>
                                    <field name="second_name" optional="hide"/>
                                    <field name="now_cost" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                    <field name="total_points"/>
                                    <field name="event_points" optional="show"/>
                                    <field name="points_per_game" optional="show"/>
                                    <field name="form" optional="show"/>
                                    <field name="selected_by_percent" optional="show" string="Selected By Percent (%)"/>
                                    <field name="squad_number" optional="hide"/>
                                    <field name="minutes" optional="hide"/>
                                    <field name="goals_scored" optional="hide"/>
                                    <field name="assists" optional="hide"/>
                                    <field name="clean_sheets" optional="hide"/>
                                    <field name="yellow_cards" optional="hide"/>
                                    <field name="red_cards" optional="hide"/>
                                    <field name="can_select" optional="hide"/>
                                    <field name="can_transact" optional="hide"/>
                                    <field name="status" optional="show" widget="badge" 
                                            decoration-success="status == 'a'" 
                                            decoration-muted="status == 'd'" 
                                            decoration-warning="status == 'i'"
                                            decoration-info="status == 's'"
                                            decoration-danger="status == 'n'"/>
                                    <field name="currency_id" column_invisible="1"/>
                                </list>
                            </field>
                        </page>
                   </notebook>

                </sheet>
            </form>
        </field>
    </record>

    <record id="fpl_teams_view_kanban" model="ir.ui.view">
        <field name="name">fpl.teams.kanban</field>
        <field name="model">fpl.teams</field>
        <field name="arch" type="xml">
            <kanban create="0" edit="0" delete="0" class="o_kanban_dashboard" string="Teams">
                <field name="photo"/>
                <field name="name"/>
                <field name="short_name"/>
                <field name="code"/>
                <field name="win"/>
                <field name="loss"/>
                <field name="draw"/>
                <field name="points"/>
                <field name="position"/>
                <field name="strength"/>
                <templates>
                    <t t-name="card" class="o_kanban_record oe_kanban_global_click">
                        <div class="o_kanban_card_header">
                            <div class="o_kanban_card_header_title">
                                <div class="o_field_image" style="width: 60px; height: 60px; margin-right: 10px; float: left;">
                                    <field name="photo" widget="image" options="{'size': [60, 60]}" style="border-radius: 50%; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"/>
                                </div>
                                <div class="o_kanban_primary_left">
                                    <div class="o_primary">
                                        <field name="name" class="fw-bold text-primary" style="font-size: 16px;"/>
                                    </div>
                                    <div class="text-muted small">
                                        <field name="short_name"/> (<field name="code"/>)
                                    </div>
                                    <div class="badge badge-info small mt-1">
                                        Position: <field name="position"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="o_kanban_card_content mt-3">
                            <div class="row text-center">
                                <div class="col-3">
                                    <div class="o_kanban_primary_bottom">
                                        <div class="text-success fw-bold fs-6">
                                            <field name="win"/>
                                        </div>
                                        <div class="text-muted small">Wins</div>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="o_kanban_primary_bottom">
                                        <div class="text-warning fw-bold fs-6">
                                            <field name="draw"/>
                                        </div>
                                        <div class="text-muted small">Draws</div>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="o_kanban_primary_bottom">
                                        <div class="text-danger fw-bold fs-6">
                                            <field name="loss"/>
                                        </div>
                                        <div class="text-muted small">Losses</div>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="o_kanban_primary_bottom">
                                        <div class="text-primary fw-bold fs-5">
                                            <field name="points"/>
                                        </div>
                                        <div class="text-muted small">Points</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="o_kanban_card_footer mt-2">
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar bg-info" role="progressbar" t-attf-style="width: #{Math.round((record.strength.raw_value / 5) * 100)}%;" t-attf-aria-valuenow="#{record.strength.raw_value}" aria-valuemin="0" aria-valuemax="5"></div>
                            </div>
                            <div class="text-center text-muted small mt-1">
                                Strength: <field name="strength"/>/5
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id="fpl_teams_view_search" model="ir.ui.view">
        <field name="model">fpl.teams</field>
        <field name="arch" type="xml">
            <search string="Filters">
                <field name="name"/>
                <field name="code"/>
                <field name="short_name"/>
            </search>
        </field>
    </record>

    <record id="fpl_teams_table_view_tree" model="ir.ui.view">
        <field name="name">fpl.teams.tree</field>
        <field name="model">fpl.teams</field>
        <field name="arch" type="xml">
            <list create="0" edit="0" delete="0" default_order="position asc" string="Table">
                <field name="position" widget="handle"/>
                <field name="photo" widget="image" options="{'size': [40, 40]}"/>
                <field name="name"/>
                <field name="short_name" optional="hide"/>
                <field name="code" optional="hide"/>
                <field name="win" optional="show"/>
                <field name="loss" optional="show"/>
                <field name="draw" optional="show"/>
                <field name="points" optional="show"/>
            </list>
        </field>
    </record>
    
    <record id="fpl_teams_view_action" model="ir.actions.act_window">
        <field name="name">FPL Teams</field>
        <field name="res_model">fpl.teams</field>
        <field name="search_view_id" ref="fantasy_premier_league.fpl_teams_view_search"/>
        <field name="view_mode">kanban,list,form</field>
    </record>

    <record id="fpl_table_view_action" model="ir.actions.act_window">
        <field name="name">Table</field>
        <field name="res_model">fpl.teams</field>
        <field name="view_mode">list</field>
        <field name="view_id" ref="fantasy_premier_league.fpl_teams_table_view_tree"/>
    </record>
</odoo>
